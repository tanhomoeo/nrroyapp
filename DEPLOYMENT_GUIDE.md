
# Next.js অ্যাপ্লিকেশন Firebase-এ ডিপ্লয়মেন্ট গাইড

এই নির্দেশিকাটি আপনার Next.js অ্যাপ্লিকেশনটি Firebase প্ল্যাটফর্মে (Firestore ডাটাবেস এবং Firebase App Hosting ব্যবহার করে) ডিপ্লয় করার জন্য একটি ধাপে ধাপে গাইড প্রদান করবে।

## পূর্বশর্ত

1.  **Node.js এবং npm/yarn:** আপনার সিস্টেমে ইনস্টল করা থাকতে হবে।
2.  **Firebase অ্যাকাউন্ট:** আপনার একটি Firebase অ্যাকাউন্ট থাকতে হবে ([firebase.google.com](https://firebase.google.com)).
3.  **Firebase CLI:** ইনস্টল করা না থাকলে, টার্মিনালে এই কমান্ডটি চালান:
    ```bash
    npm install -g firebase-tools
    ```
4.  **Firebase-এ লগইন:** টার্মিনালে এই কমান্ডটি ব্যবহার করে আপনার Firebase অ্যাকাউন্টে লগইন করুন:
    ```bash
    firebase login
    ```

## ধাপসমূহ

### ১. Firebase প্রজেক্ট সেটআপ (যদি না করা হয়ে থাকে)

*   Firebase Console-এ যান ([console.firebase.google.com](https://console.firebase.google.com)) এবং একটি নতুন প্রজেক্ট তৈরি করুন অথবা বিদ্যমান একটি প্রজেক্ট নির্বাচন করুন।
*   **Firestore Database:**
    *   আপনার Firebase প্রজেক্টের **Build > Firestore Database** সেকশনে যান।
    *   "Create database" এ ক্লিক করুন।
    *   "Start in production mode" নির্বাচন করুন এবং আপনার পছন্দের লোকেশন নির্বাচন করুন (যেমন, `asia-east1`, যা আপনার `firebase.json` এ আছে)।
    *   **নিরাপত্তা বিধি (Security Rules):** আপনার `firestore.rules` ফাইলটি (`allow read, write: if true;`) বর্তমানে সম্পূর্ণ খোলা, যা অনিরাপদ। প্রোডাকশনের জন্য এটিকে আপনার অ্যাপ্লিকেশনের নিরাপত্তা চাহিদা অনুযায়ী পরিবর্তন করা **অত্যন্ত জরুরি**।
*   **App Hosting:**
    *   আপনার Firebase প্রজেক্টের **Build > App Hosting** সেকশনে যান।
    *   "Get started" এ ক্লিক করে একটি নতুন ব্যাকএন্ড তৈরি করুন। GitHub রিপোজিটরির সাথে কানেক্ট করতে বলা হলে, আপনি আপাতত "Skip" করতে পারেন এবং CLI থেকে ডিপ্লয় করার জন্য প্রস্তুত হতে পারেন।

### ২. লোকাল প্রজেক্টের সাথে Firebase প্রজেক্ট কানেক্ট করা

আপনার লোকাল কোডটি কোন Firebase প্রজেক্টে ডিপ্লয় হবে তা নির্দিষ্ট করতে নিচের কমান্ডটি ব্যবহার করুন:

```bash
firebase use --add
```
*   এই কমান্ডটি চালানোর পর আপনার সকল Firebase প্রজেক্টের একটি তালিকা দেখানো হবে।
*   তালিকা থেকে আপনার কাঙ্ক্ষিত প্রজেক্টটি (যেমন `dr-nihar`) নির্বাচন করুন এবং **Enter** চাপুন।
*   এরপর এই প্রজেক্টের জন্য একটি "alias" (ডাকনাম) দিতে বলা হলে, `default` লিখে **Enter** দিন।

এটি সফলভাবে সম্পন্ন হলে, আপনার `.firebaserc` ফাইলটি তৈরি বা আপডেট হয়ে যাবে।

### ৩. এনভায়রনমেন্ট ভেরিয়েবল সেটআপ (API Key)

আপনার অ্যাপ্লিকেশনটি Google Gemini API ব্যবহার করে, যার জন্য `GOOGLE_GENAI_API_KEY` প্রয়োজন। **এই Key সরাসরি কোডে বা `.env` ফাইলে রাখা যাবে না।**

*   **Firebase App Hosting এর জন্য:**
    *   Firebase Console-এ আপনার App Hosting ব্যাকএন্ডের ড্যাশবোর্ডে যান।
    *   সেখান থেকে **Settings** ট্যাবে যান।
    *   **Environment variables** সেকশনে **Add variable**-এ ক্লিক করুন।
    *   **Variable name** হিসেবে `GOOGLE_GENAI_API_KEY` এবং **Value** হিসেবে আপনার প্রাপ্ত API Key-টি পেস্ট করে **Save** করুন।

### ৪. Next.js অ্যাপ্লিকেশন বিল্ড ও ডিপ্লয় করা

আপনার `firebase.json` ফাইলে `frameworksBackend` কনফিগার করা আছে, তাই Firebase CLI স্বয়ংক্রিয়ভাবে আপনার অ্যাপটি বিল্ড এবং ডিপ্লয় করার কাজটি পরিচালনা করবে।

*   **সম্পূর্ণ অ্যাপ্লিকেশন ডিপ্লয় করতে (হোস্টিং এবং ফায়ারস্টোর):**
    ```bash
    firebase deploy
    ```
*   **শুধুমাত্র হোস্টিং ডিপ্লয় করতে:**
    ```bash
    firebase deploy --only hosting
    ```
এই কমান্ডটি প্রথমে আপনার Next.js অ্যাপ্লিকেশনটিকে প্রোডাকশনের জন্য বিল্ড করবে (`npm run build`) এবং তারপর বিল্ড করা ফাইলগুলো Firebase App Hosting-এ আপলোড করবে।

### ৫. Firestore নিরাপত্তা বিধি (Security Rules) আপডেট (অত্যন্ত জরুরি)

আপনার `firestore.rules` ফাইলে বর্তমানে যে বিধি (`allow read, write: if true;`) আছে, তা **প্রোডাকশনের জন্য সম্পূর্ণ অনিরাপদ**। এর মানে হলো, যে কেউ আপনার ডাটাবেসে ডেটা পড়তে, লিখতে বা মুছতে পারবে।

**আপনাকে অবশ্যই এই বিধিগুলো পরিবর্তন করে আপনার অ্যাপ্লিকেশনের নিরাপত্তা চাহিদা অনুযায়ী সেট করতে হবে।** উদাহরণস্বরূপ:
*   ব্যবহারকারীরা শুধুমাত্র নিজেদের ডেটা দেখতে বা পরিবর্তন করতে পারবে।
*   নির্দিষ্ট কালেকশনে শুধুমাত্র অথেনটিকেটেড ব্যবহারকারীরা অ্যাক্সেস করতে পারবে।

`firestore.rules` ফাইলটি আপডেট করার পর, `firebase deploy --only firestore:rules` কমান্ড দিয়ে এটি ডিপ্লয় করুন।

### ৬. ডিপ্লয়মেন্ট যাচাইকরণ

*   ডিপ্লয়মেন্ট সফল হলে, Firebase CLI আপনাকে আপনার অ্যাপ্লিকেশনের URL দেখাবে।
*   Firebase Console-এ App Hosting সেকশনে আপনার ব্যাকএন্ডের জন্য প্রদত্ত URL টি ব্যবহার করুন।
*   ব্রাউজারে গিয়ে URL টি ভিজিট করে আপনার অ্যাপ্লিকেশনটি সঠিকভাবে কাজ করছে কিনা তা পরীক্ষা করুন।

### অতিরিক্ত টিপস

*   **CI/CD:** GitHub Actions বা অন্যান্য CI/CD টুল ব্যবহার করে স্বয়ংক্রিয় বিল্ড ও ডিপ্লয়মেন্ট সেটআপ করতে পারেন। Firebase App Hosting এ এর জন্য বিল্ট-ইন সুবিধা আছে।
*   **Monitoring:** Firebase Console-এ App Hosting, এবং Firestore-এর পারফরম্যান্স এবং এরর লগ পর্যবেক্ষণ করুন।
*   **Domain:** Firebase Hosting এ কাস্টম ডোমেইন যুক্ত করতে পারেন।

এই নির্দেশিকা অনুসরণ করে আপনি সফলভাবে আপনার অ্যাপ্লিকেশনটি Firebase-এ ডিপ্লয় করতে পারবেন। কোনো নির্দিষ্ট ধাপে সমস্যা হলে, Firebase এর অফিশিয়াল ডকুমেন্টেশন এবং এরর মেসেজগুলো দেখুন।
